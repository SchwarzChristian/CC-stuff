varsion = "1.0"

-- class Button
Button = {}
Button.__index = Button

function new(caption)
	local tmp = Component.new()
	setmetatable(tmp, Label)
	tmp:setCaption(caption)
	return tmp
end

function Caption.setParent(parent)
	self.parent = parent
	self:setCaption(self.caption)
end

function Caption:setCaption(caption)
	self.caption = caption
	if (self.parent) then
		self.width = min(#text, self.parent.width - self.x - 1)
	end
end

function Caption:onDraw(mon)
	if (self.parent) then
		if (self.y > self.parent.height) then return end
		mon.setCursorPos(self.parent.x + self.x, self.parent.y + self.y)
		mon.setTextColor(self.parent.fgColor)
		mon.setBackgroundColor(self.parent.bgColor)
		mon.write("+")
		for _ = 1, self.width do
			mon.write("-")
		end
		mon.write("+")
		
		if (self.y + 1 > self.parent.height) then return end
		mon.setCursorPos(self.parent.x + self.x, self.parent.y + self.y + 1)
		mon.write("|")
		for i = 1, self.width do
			mon.write(text:sub(i,i))
		end
		mon.write("|")

		if (self.y + 2 > self.parent.height) then return end
		mon.setCursorPos(self.parent.x + self.x, self.parent.y + self.y + 2)
		mon.write("+")
		for _ = 1, self.width do
			mon.write("-")
		end
		mon.write("+")
	end
end
-- end class

write("loaded API: Button - " .. version .. "\n")

